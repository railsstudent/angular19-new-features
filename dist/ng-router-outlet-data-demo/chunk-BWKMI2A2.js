import{a as H}from"./chunk-GBZ2HIOH.js";import{$ as M,C as _,G as W,I as l,K as F,L as E,M as I,N as o,O as s,P as D,Q as g,R as S,S as m,T as c,U as O,V as w,_ as V,aa as j,da as A,e as y,f as L,g as b,h as R,j as T,m as p,ma as P,p as h,pa as $,q as C,qa as q,ra as U,u as N,v as k,x as f,z as n}from"./chunk-3HYMCOWP.js";var G=t=>[t],x=class t{c=k.required();selectedFighter=f(void 0);showFighter=N();static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-star-wars-card"]],inputs:{c:[1,"c"]},outputs:{showFighter:"showFighter"},decls:7,vars:6,consts:[[1,"card"],[3,"click","routerLink"]],template:function(e,a){if(e&1){let i=g();o(0,"div",0),V(1),o(2,"span"),c(3),s(),c(4,"\xA0\xA0\xA0 "),o(5,"a",1),S("click",function(){h(i);let z=j(1);return C(a.showFighter.emit(z))}),c(6),s()()}if(e&2){n();let i=M(a.c());n(2),w("Id: ",i.id,""),n(2),l("routerLink",A(4,G,i.id)),n(),O(a.c().name)}},dependencies:[U],styles:[".card[_ngcontent-%COMP%]{border:1px solid black;border-radius:.25rem;margin-bottom:.25rem;padding:.35rem}"],changeDetection:0})};function K(t,r,e){return{id:t,isSith:r,gender:e.gender,eyeColor:e.eye_color,hairColor:e.hair_color,skinColor:e.skin_color,name:e.name,films:e.films}}var v=class t{#e=p(P);retrieveCharacter(r,e){return this.#e.get(`https://swapi.py4e.com/api/people/${r}`).pipe(L(a=>K(r,e,a)),R(a=>(console.error(a),y(void 0))))}retrieveCharacters({ids:r,isSith:e}){let a=r.map(i=>this.retrieveCharacter(i,e));return b(a).pipe(L(i=>i.filter(u=>typeof u<"u")))}static \u0275fac=function(e){return new(e||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})};var Q=(t,r)=>r.id;function X(t,r){t&1&&(o(0,"p"),c(1,"Loading characters..."),s())}function Y(t,r){if(t&1&&(o(0,"p"),c(1),s()),t&2){let e=m();n(),w("Error: ",e.charactersResource.error(),"")}}function Z(t,r){if(t&1){let e=g();o(0,"app-star-wars-card",3),S("showFighter",function(i){h(e);let u=m(3);return C(u.selectedFighter.set(i))}),s()}if(t&2){let e=r.$implicit;l("c",e)}}function ee(t,r){if(t&1&&(E(0,Z,1,1,"app-star-wars-card",1,Q),D(2,"router-outlet",2)),t&2){let e=m(2);I(e.charactersResource.value()),n(2),l("routerOutletData",e.selectedFighter())}}function te(t,r){if(t&1&&W(0,ee,3,1),t&2){let e=m();F(e.charactersResource.hasValue()?0:-1)}}var d=class t{fighterList=p($);starWarsCharactersService=p(v);selectedFighter=f(void 0);charactersResource=H({request:()=>this.fighterList(),loader:({request:r})=>this.starWarsCharactersService.retrieveCharacters(r),defaultValue:[]});static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-starwars-list"]],decls:6,vars:1,consts:[[1,"fighters"],[3,"c"],[3,"routerOutletData"],[3,"showFighter","c"]],template:function(e,a){e&1&&(o(0,"div")(1,"h3",0),c(2,"Fighters"),s(),W(3,X,2,0,"p")(4,Y,2,1,"p")(5,te,1,1),s()),e&2&&(n(3),F(a.charactersResource.isLoading()?3:a.charactersResource.error()?4:5))},dependencies:[x,q],styles:[".fighters[_ngcontent-%COMP%]{font-style:italic;text-decoration:underline;margin-bottom:.5rem}"],changeDetection:0})};var re=[{path:"",component:d,children:[{path:":id",title:"Star Wars Fighter",loadChildren:()=>import("./chunk-A35VEWZP.js")}]}],Le=re;export{Le as default};
