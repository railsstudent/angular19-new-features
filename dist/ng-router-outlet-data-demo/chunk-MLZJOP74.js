import{a as T}from"./chunk-GBZ2HIOH.js";import{C as M,G as d,K as f,L as g,M as w,N as n,O as o,P as E,S as p,T as r,V as l,e as S,f as v,g as _,h as x,j as C,m,ma as R,pa as h,z as a}from"./chunk-3HYMCOWP.js";function y(e){return{title:e.title,openingCrawl:e.opening_crawl,releaseDate:e.release_date,episodeId:e.episode_id}}var c=class e{#e=m(R);retrieveMovie(i){return this.#e.get(i).pipe(v(t=>y(t)),x(t=>(console.error(t),S(void 0))))}retrieveMovies(i){let t=i.map(s=>this.retrieveMovie(s));return _(t).pipe(v(s=>s.filter(I=>typeof I<"u")))}static \u0275fac=function(t){return new(t||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})};var b=(e,i)=>i.title;function D(e,i){e&1&&(n(0,"p"),r(1,"Loading movies..."),o())}function j(e,i){if(e&1&&(n(0,"p"),r(1),o()),e&2){let t=p();a(),l("Error: ",t.moviesResource.error(),"")}}function O(e,i){if(e&1&&(n(0,"p"),r(1),o(),n(2,"p"),r(3),o(),n(4,"p"),r(5),o(),n(6,"p"),r(7),o(),E(8,"hr")),e&2){let t=i.$implicit;a(),l("Title: ",t.title,""),a(2),l("Episode: ",t.episodeId,""),a(2),l("Release Date: ",t.releaseDate,""),a(2),l("Opening Crawl: ",t.openingCrawl,"")}}function k(e,i){if(e&1&&g(0,O,9,4,null,null,b),e&2){let t=p(2);w(t.moviesResource.value())}}function F(e,i){if(e&1&&d(0,k,2,0),e&2){let t=p();f(t.moviesResource.hasValue()?0:-1)}}var u=class e{films=m(h);movieService=m(c);moviesResource=T({request:()=>this.films(),loader:({request:i})=>this.movieService.retrieveMovies(i),defaultValue:[]});static \u0275fac=function(t){return new(t||e)};static \u0275cmp=M({type:e,selectors:[["app-starwars-movies"]],decls:6,vars:1,consts:[[1,"movies"]],template:function(t,s){t&1&&(n(0,"div")(1,"h3",0),r(2,"Movies"),o(),d(3,D,2,0,"p")(4,j,2,1,"p")(5,F,1,1),o()),t&2&&(a(3),f(s.moviesResource.isLoading()?3:s.moviesResource.error()?4:5))},styles:[".movies[_ngcontent-%COMP%]{font-style:italic;text-decoration:underline;margin-bottom:.5rem}"],changeDetection:0})};export{u as default};
